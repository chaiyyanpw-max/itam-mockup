<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Your items requests</title>
<link rel="icon" href="data:,">
<style>
  :root{ --bg:#f7f9fc; --panel:#ffffff; --line:#e5e7eb; --muted:#667085; --text:#111827; --shadow:0 6px 18px rgba(16,24,40,.06); --accent:#2563eb;}
  [data-theme="dark"]{ --bg:#0f1420; --panel:#101828; --line:#1f2937; --muted:#98a2b3; --text:#e5e7eb; }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font:15px/1.55 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans Thai',sans-serif}
  a{color:var(--accent);text-decoration:none}
  .app{display:grid;grid-template-columns:260px 1fr;min-height:100%}
  aside{border-right:1px solid var(--line);padding:16px}
  .brand{display:flex;gap:8px;align-items:center;font-weight:800}
  .home{width:24px;height:24px;border-radius:6px;background:linear-gradient(135deg,#4f46e5,#06b6d4)}
  .nav{margin-top:12px}
  .nav a{display:flex;gap:10px;align-items:center;margin:8px 0;padding:10px 12px;background:var(--panel);border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);color:var(--text)}
  .nav a.active{outline:2px solid var(--accent)}
  header{display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--line);padding:12px 18px;background:var(--bg);position:sticky;top:0;z-index:5}
  .right{margin-left:auto;display:flex;gap:10px;align-items:center}
  .circle{width:36px;height:36px;border-radius:999px;background:var(--panel);border:1px solid var(--line);display:grid;place-items:center;box-shadow:var(--shadow);font-weight:800}
  .user{display:flex;gap:10px;align-items:center;border:1px solid var(--line);background:var(--panel);border-radius:999px;padding:6px 10px;box-shadow:var(--shadow)}
  .panel{position:relative}
  .dropdown{position:absolute;top:46px;right:0;background:var(--panel);border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);min-width:280px;display:none;z-index:30;padding:12px}
  .dropdown.open{display:block}
  .section-title{font-size:12px;color:var(--muted);margin:6px 0 8px}
  .chip-row{display:flex;gap:8px;flex-wrap:wrap}
  .chip{border:1px solid var(--line);background:#f2f4f7;border-radius:999px;padding:8px 12px;font-weight:600;cursor:pointer}
  [data-theme="dark"] .chip{background:#0f172a}
  main{padding:20px}
  .h1{font-weight:800;margin:6px 0 12px}

.list{display:grid;gap:10px;max-width:900px}
.row{display:grid;grid-template-columns:52px 1fr auto;gap:12px;align-items:center;background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:12px}
.ico{width:52px;height:52px;border-radius:999px;display:grid;place-items:center;background:#eef2ff;font-size:24px}
.btn{display:inline-flex;align-items:center;gap:8px;background:#2563eb;color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:600;cursor:pointer}
.btn.ghost{background:transparent;color:inherit;border:1px solid var(--line)}
.actions{display:flex;gap:10px;justify-content:end;margin-top:16px}
.note{color:var(--muted)}
.printable{padding:16px;border:1px dashed var(--line);border-radius:12px;margin-top:12px}
</style>
</head>
<body>
<div class="app">
  <aside>
    <div class="brand"><div class="home"></div> ITAM ¬∑ Dashboard</div>
    <nav class="nav">
      <a href="./index.html">üè† Dashboard</a>
      <a href="./item-request.html">üìÑ Item Request</a>
    </nav>
  </aside>
  <section>
    <header>
      <div class="brand"><div class="home"></div> You items requests</div>
      <div class="right">
        <div class="circle" title="Notifications">üîî</div>
        <div class="panel">
          <div class="circle" id="settingsBtn" title="Settings">‚öôÔ∏è</div>
          <div class="dropdown" id="settingsMenu">
            <div class="section-title">Color theme</div>
            <div class="chip-row">
              <div class="chip" id="theme-dark">Black</div>
              <div class="chip" id="theme-light">White</div>
            </div>
            <div class="section-title" style="margin-top:10px">Language</div>
            <div class="chip-row">
              <div class="chip" id="lang-th">TH</div>
              <div class="chip" id="lang-en">EN</div>
            </div>
          </div>
        </div>
        <div class="user" title="Account">
          <div class="circle" style="width:30px;height:30px">JR</div>
          <div><div style="font-weight:700">Jack Reacher</div><div style="font-size:12px;color:var(--muted)">IT Support</div></div>
        </div>
      </div>
    </header>

    <main>
      <div class="h1">Your items requests</div>
      <div id="summary" class="printable">
        <div class="note">Summary below will be printed.</div>
        <div id="friendInfo" class="note"></div>
        <div class="list" id="list"></div>
        <div class="actions">
          <a class="btn ghost" href="item-request.html">Cancel</a>
          <button class="btn" id="confirmPrint">Confirm & print</button>
        </div>
      </div>
    </main>
  </section>
</div>
<script>
document.getElementById('settingsBtn').onclick=()=>document.getElementById('settingsMenu').classList.toggle('open');
document.addEventListener('click',(e)=>{ if(!e.target.closest('#settingsBtn')&&!e.target.closest('#settingsMenu')) document.getElementById('settingsMenu').classList.remove('open'); });
document.getElementById('theme-dark').onclick=()=>{document.documentElement.dataset.theme='dark'};
document.getElementById('theme-light').onclick=()=>{document.documentElement.dataset.theme=''};
function load(){ 
  let payload=null; 
  try{ payload=JSON.parse(localStorage.getItem('itam_cart_submit')||'null'); }catch(e){}
  const list=document.getElementById('list');
  const friend=document.getElementById('friendInfo');
  if(!payload || !payload.items || !payload.items.length){ 
    list.innerHTML='<div class="note">No items in the request.</div>'; 
    friend.textContent='';
    return; 
  }
  friend.textContent = payload.friendEmail ? ('For friend: '+payload.friendEmail) : '';
  list.innerHTML = payload.items.map(it=>`
    <div class="row">
      <div class="ico">üì¶</div>
      <div><div style="font-weight:700">${it.name}</div><div class="note">Quantity: ${it.qty}</div></div>
      <div class="note">Ref: ${new Date(payload.ts).toLocaleString()}</div>
    </div>`).join('');
}
load();
document.getElementById('confirmPrint').onclick=()=>window.print();
</script>
</body>
</html>
