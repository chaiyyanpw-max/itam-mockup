<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ITAM ¬∑ Item Request</title>
<style>
  :root{ --bg:#fafafa; --panel:#ffffff; --line:#e5e7eb; --muted:#667085; }
  *{box-sizing:border-box} html,body{height:100%;margin:0;background:var(--bg);color:#111;font:15px/1.55 system-ui,Segoe UI,Roboto,'Noto Sans Thai',sans-serif}
  header{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;border-bottom:1px solid var(--line);background:#fff;position:sticky;top:0;z-index:10}
  .right{display:flex;gap:10px;align-items:center}
  .circle{width:36px;height:36px;border-radius:999px;border:1px solid var(--line);display:grid;place-items:center;background:#fff;cursor:pointer}
  .user{display:flex;gap:8px;align-items:center;border:1px solid var(--line);background:#fff;border-radius:999px;padding:4px 10px}
  .name{font-weight:700;font-size:14px} .role{font-size:12px;color:var(--muted)}
  .app{display:grid;grid-template-columns:220px 1fr;min-height:100%}
  aside{border-right:1px solid var(--line);padding:14px;background:#f3f4f6}
  .nav a{display:block;padding:10px 12px;border-radius:10px;margin:6px 0;background:#fff;border:1px solid var(--line);text-decoration:none;color:#111}
  .nav a.active{outline:2px solid #2563eb}
  main{padding:20px}
  .h1{font-weight:800;margin:6px 0 12px} .sub{color:var(--muted);margin-bottom:14px}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;max-width:1000px}
  @media(max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
  @media(max-width:600px){.grid{grid-template-columns:1fr}}
  .itm{display:grid;grid-template-columns:44px 1fr auto;gap:10px;align-items:center;background:#fff;border:1px solid var(--line);border-radius:10px;padding:10px}
  .ico{width:44px;height:44px;border-radius:999px;display:grid;place-items:center;background:#eef2ff}
  .muted{color:var(--muted)} .link{color:#2563eb;cursor:pointer}
  .actions{display:flex;gap:10px;align-items:center}
  .btn-icon{width:36px;height:36px;border-radius:999px;border:1px solid var(--line);display:grid;place-items:center;background:#fff;cursor:pointer}
  .cart{position:fixed;right:20px;bottom:20px;background:#fff;border:1px solid var(--line);border-radius:999px;width:56px;height:56px;display:grid;place-items:center;font-size:22px}
  .num{position:absolute;right:-6px;top:-6px;background:#ef4444;color:#fff;border-radius:999px;font-size:12px;padding:2px 6px}
  dialog::backdrop{background:rgba(0,0,0,.55)} dialog{border:none;border-radius:12px;padding:0;overflow:hidden}
  .modal-head{padding:12px 16px;border-bottom:1px solid var(--line);background:#fff;font-weight:800}
  .modal-body{padding:14px;background:#fff}
</style>
</head>
<body>
<header>
  <div>ITAM ¬∑ Item Request</div>
  <div class="right">
    <!-- persistent top-right tabs -->
    <a class="circle" title="Notifications">üîî</a>
    <a class="circle" title="Settings">‚öôÔ∏è</a>
    <a class="circle" title="Account">üë§</a>
    <div class="user"><div class="circle" style="width:28px;height:28px">JR</div><div><div class="name">Jack Reacher</div><div class="role">IT Support</div></div></div>
  </div>
</header>
<div class="app">
  <aside><div class="nav">
    <a href="index.html">Dashboard</a>
    <a class="active" href="item-request.html">Item Request</a>
  </div></aside>
  <main>
    <div class="h1">Available to Borrow</div>
    <div class="grid" id="grid"></div>
  </main>
</div>

<dialog id="dlg">
  <div class="modal-head" id="dlgTitle">Detail</div>
  <div class="modal-body">
    <div id="dlgInfo" class="muted"></div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px">
      <button onclick="dlg.close()">Close</button>
      <button id="addBtn">Add to cart</button>
    </div>
  </div>
</dialog>

<div class="cart" id="cartBtn">üß∫<span class="num" id="cartNum">0</span></div>

<script>
const items=[
  {name:"Laptop", icon:"üíª"},
  {name:"Flash Drive", icon:"üîò"},
  {name:"Mic + Speaker", icon:"üé§"},
  {name:"Charger", icon:"üîå"},
  {name:"Keyboard", icon:"‚å®Ô∏è"},
  {name:"Backpack", icon:"üéí"},
  {name:"Mouse", icon:"üñ±Ô∏è"},
  {name:"Headphone", icon:"üéß"}
];
const cart=new Map();

function renderGrid(){
  const g=document.getElementById('grid');
  g.innerHTML=items.map(it=>`
    <div class="itm">
      <div class="ico">${it.icon}</div>
      <div><div style="font-weight:700">${it.name}</div><div class="link" data-see="${it.name}">See detail</div></div>
      <div class="actions">
        <!-- per-item add-to-cart icon -->
        <div class="btn-icon" title="Add to cart" data-add="${it.name}">üß∫</div>
        <!-- delete icon kept as before -->
        <div class="btn-icon" title="Remove item" data-del="${it.name}">üóëÔ∏è</div>
      </div>
    </div>`).join('');
  g.querySelectorAll('[data-see]').forEach(a=>a.onclick=()=>openDetail(a.dataset.see));
  g.querySelectorAll('[data-del]').forEach(b=>b.onclick=()=>{ const i=items.findIndex(x=>x.name===b.dataset.del); if(i>-1){items.splice(i,1); renderGrid();} cart.delete(b.dataset.del); updateCart(); });
  g.querySelectorAll('[data-add]').forEach(b=>b.onclick=()=>{ addToCart(b.dataset.add); });
}
function openDetail(name){
  window.dlg=document.getElementById('dlg');
  const info=document.getElementById('dlgInfo');
  document.getElementById('dlgTitle').textContent=name;
  info.textContent=`${name} ¬∑ available`;
  const add=document.getElementById('addBtn');
  add.onclick=()=>{ addToCart(name); dlg.close(); };
  dlg.showModal();
}
function addToCart(name){
  cart.set(name,(cart.get(name)||0)+1); updateCart();
}
function updateCart(){
  const n=[...cart.values()].reduce((a,b)=>a+b,0);
  document.getElementById('cartNum').textContent=n;
}
renderGrid(); updateCart();
</script>
</body>
</html>
